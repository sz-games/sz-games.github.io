<!DOCTYPE html>
<html>
  <head>
    <script
      async
      src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3723218062742398"
      crossorigin="anonymous"
      data-ad-channel="9267153333"
      data-ad-client="ca-pub-3723218062742398"
      data-ad-frequency-hint="15s"
    ></script>
    <!-- H5 Ad Placement API Initialization -->
    <script>
      // Initialize H5 API - Standard implementation per Google docs
      window.adsbygoogle = window.adsbygoogle || []
      var adBreak = (adConfig = function (o) {
        adsbygoogle.push(o)
      })
      console.log('ðŸš€ H5 Ad API initialized')
    </script>

    <script>
      function showPreroll() {
        adBreak({
          type: 'preroll',
          name: 'game-start',
          adBreakDone: (placementInfo) => {
            console.log('Preroll complete. Status:', placementInfo.breakStatus)
            // Ensure we stay on the current page after ad
            window.history.pushState(null, null, window.location.href)
            // Start your game now
          },
        })
      }

      adConfig({
        preloadAdBreaks: 'on',
        onReady: () => {
          console.log('H5 Ads API is ready.')
          // Add current URL to history to prevent back navigation
          window.history.pushState(null, null, window.location.href)
          // The API is ready, show the first ad.
          showPreroll()
        },
      })

      // Example of calling an ad on game over
      document.addEventListener('gameOver', function () {
        console.log('Game Over - calling interstitial ad.')
        adBreak({
          type: 'next', // 'next' is used for interstitials between levels/sessions
          name: 'game-over',
        })
      })

      // Example of calling a rewarded ad on game won
      document.addEventListener('gameWon', function () {
        console.log('Game Won - calling rewarded ad.')
        adBreak({
          type: 'reward',
          name: 'game-won',
          adBreakDone: (placementInfo) => {
            if (placementInfo.breakStatus === 'viewed') {
              console.log('User watched rewarded ad - grant bonus!')
              // Grant reward to user
            }
          },
        })
      })

      // Function to show rewarded ads (can be called manually)
      function showRewardedAd() {
        adBreak({
          type: 'reward',
          name: 'user-requested-reward',
          adBreakDone: (placementInfo) => {
            if (placementInfo.breakStatus === 'viewed') {
              console.log('User earned reward!')
              // Grant reward logic here
            }
            // Ensure we stay on the current page after ad
            window.history.pushState(null, null, window.location.href)
          },
        })
      }

      // Make rewarded ad function available globally
      window.showRewardedAd = showRewardedAd
    </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-C78TXR0XFK"></script>
    <script>
      window.dataLayer = window.dataLayer || []
      function gtag() {
        dataLayer.push(arguments)
      }
      gtag('js', new Date())

      gtag('config', 'G-C78TXR0XFK')
    </script>

    <script src="https://unpkg.com/@ruffle-rs/ruffle"></script>
    <link rel="icon" href="https://github.com/sz-games/home/blob/main/G.png?raw=true" />
    <title>Sz Games</title>
    <meta charset="UTF-8" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
      }

      .btn-group button {
        background-color: black; /* Green background */

        color: white; /* White text */
        padding: 10px 24px; /* Some padding */
        cursor: pointer; /* Pointer/hand icon */
        float: left; /* Float the buttons side by side */
      }

      /* Clear floats (clearfix hack) */
      .btn-group:after {
        content: '';
        clear: both;
        display: table;
      }

      .btn-group button:not(:last-child) {
        border-right: none; /* Prevent double borders */
      }

      /* Add a background color on hover */
      .btn-group button:hover {
        background-color: grey;
      }

      /* Header/Logo Title */
      .header {
        padding: 60px;
        text-align: center;
        background: linear-gradient(to bottom right, #9a9a9a, rgb(39, 39, 39));
        color: white;
        width: auto;
        font-size: 30px;

        border-radius: 15px;
      }

      /* Page Content */
    </style>
  </head>
  <body onresize="resize()">
    <style>
      .game {
        position: absolute;
        color: white;

        transform: scale(1.8);
        z-index: 3;
        font-family: Arial, Helvetica, sans-serif;
      }
      .fade {
        position: absolute;
        background: linear-gradient(to bottom, #1d1d1d, #1d1d1d5d, rgba(39, 39, 39, 0));
        width: 300px;
        height: 150px;
        border-radius: 15px;
      }
    </style>

    <iframe
      frameborder="0"
      id="game"
      style="text-align: center; align-items: center; overflow: hidden; width: 100%"
      src="https://emupedia.net/emupedia-game-agar.io/"
      allowfullscreen
    ></iframe>

    <h2
      onclick="window.location = 'https://sz-games.github.io'"
      style="cursor: pointer; position: fixed; bottom: -20px"
    >
      Back
    </h2>
    <h2 style="position: fixed; bottom: 10px">____</h2>
    <h2 onclick="makeFullScreen()" style="cursor: pointer; position: fixed; bottom: 20px">Fullscreen</h2>
  </body>

  <script>
    document.body.onkeyup = function (e) {
      if (e.keyCode == 27) {
        document.getElementById('game').style.width = '800px'
      }
    }

    function requestFullScreen(element) {
      // Supports most browsers and their versions.
      var requestMethod =
        element.requestFullScreen ||
        element.webkitRequestFullScreen ||
        element.mozRequestFullScreen ||
        element.msRequestFullscreen

      if (requestMethod) {
        // Native full screen.
        requestMethod.call(element)
        let hh = window.innerHeight - 10

        document.getElementById('game').height = hh
      } else if (typeof window.ActiveXObject !== 'undefined') {
        // Older IE.
        var wscript = new ActiveXObject('WScript.Shell')
        if (wscript !== null) {
          wscript.SendKeys('{F11}')
        }
      }
    }
    var canvas = document.getElementById('game')

    function makeFullScreen() {
      requestFullScreen(canvas)
    }

    let hh = window.innerHeight - 10

    document.getElementById('game').height = hh
    window.onresize = function (event) {
      let hh = window.innerHeight - 10

      document.getElementById('game').height = hh
    }
  </script>
</html>
